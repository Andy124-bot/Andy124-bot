<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Collector Profile</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <button onclick="speakPageText()" aria-label="Read entire page">📖 Read All</button>
    <button onclick="stopSpeaking()" aria-label="Stop voice narration">⏹️ Stop Voice</button>

    <nav class="main-nav">
        <ul>
            <li><a href="index.html">🃏 Home</a></li>
            <li><a href="earn.html">🎰 Earn Cards</a></li>
            <li><a href="books.html">🏅 Books</a></li>
            <li><a href="profile.html">👤 Profile</a></li>
        </ul>
    </nav>

    <main>

        <section class="badges-section">
            <h2 class="award-cards-text">⭐ MY Award Badges</h2>
            <div id="award-container" class="badge-container"></div>
        </section>

        <section class="profile-stats">
            <p id="collected-badge-count">Collected Badges: 0</p>
            <p id="total-badge-count">Total Badges Available: 26/26</p>
            <p id="badge-rank">Badge Rank: Bubble Beginner</p>
        </section>

        <section>
            <h2>🃏 Collected Gold Star Cards</h2>
            <div id="collected-star-cards" class="card-grid"></div>
        </section>

        <section class="card-stats">
            <p id="collected-card-count">Collected Cards: 0</p>
            <p id="total-card-count">Total Cards Available: 26/26</p>
        </section>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const badgeContainer = document.getElementById('award-container');
                const badgeCountText = document.getElementById('collected-badge-count');
                const badgeRank = document.getElementById('badge-rank');
                const totalBadgeCount = document.getElementById('total-badge-count');

                const earnedBadges = JSON.parse(localStorage.getItem('earnedBadges')) || [];
                const totalBadgesDesigned = 26;
                const remainingBadges = totalBadgesDesigned - earnedBadges.length;

                badgeCountText.textContent = `Collected Badges: ${earnedBadges.length}`;
                totalBadgeCount.textContent = `Remaining Badges: ${remainingBadges} / ${totalBadgesDesigned}`;

                // ✅ Set dynamic badge count
                badgeCountText.textContent = `Collected Badges: ${earnedBadges.length}`;
                totalBadgeCount.textContent = `Total Badges Available: ${earnedBadges.length} / ${totalBadgesAvailable}`;

                function getRank(count) {
                    if (count === 0) return 'Bubble Beginner';
                    if (count < 5) return 'Friendly Fin';
                    if (count < 10) return 'Reef Rookie';
                    if (count < 20) return 'Tide Tamer';
                    return 'Gold-Star Master';
                }

                badgeRank.textContent = `Badge Rank: ${getRank(earnedBadges.length)}`;

                // 🏅 Render earned badges
                if (earnedBadges.length === 0) {
                    badgeContainer.innerHTML = "<p>No badges earned yet. Play the Snap game to unlock some!</p>";
                } else {
                    badgeContainer.innerHTML = "";
                    earnedBadges.forEach((badgePath) => {
                        const badge = document.createElement('div');
                        badge.classList.add('badge');
                        badge.innerHTML = `
                                    <img src="${badgePath}" alt="Badge Image">
                                    <div class="badge-label">${badgePath.split('/').pop().replace('.png', '').replace(/[_-]/g, ' ')}</div>
                                `;
                        badgeContainer.appendChild(badge);
                    });
                }
            });
        </script>

    </main>

    <script src="profile.js"></script>
    <script src="/script.js"></script>
</body>

</html>